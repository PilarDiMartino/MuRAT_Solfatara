<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><meta name="generator" content="MATLAB R2019b"><title>MuRAT Multi-Resolution (seismic) Attenuation Tomography</title><style type="text/css">.rtcContent { padding: 30px; } .S0 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 28.8px; min-height: 0px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 24px; font-weight: 400; text-align: left;  }
.S1 { border-left: 0px none rgb(0, 0, 0); border-right: 0px none rgb(0, 0, 0); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px; line-height: 16px; min-height: 16px; white-space: pre; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;  }
.S2 { margin: 2px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S3 { margin: 10px 0px 20px; padding-left: 0px; font-family: Helvetica, Arial, sans-serif; font-size: 14px;  }
.S4 { margin-left: 56px; line-height: 21px; min-height: 0px; text-align: left; white-space: pre-wrap;  }
.S5 { margin: 20px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }
.CodeBlock { background-color: #F7F7F7; margin: 10px 0 10px 0;}
.S6 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 1px solid rgb(233, 233, 233); border-bottom: 0px none rgb(0, 0, 0); border-radius: 4px 4px 0px 0px; padding: 6px 45px 0px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S7 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 0px none rgb(0, 0, 0); border-radius: 0px; padding: 0px 45px 0px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S8 { border-left: 1px solid rgb(233, 233, 233); border-right: 1px solid rgb(233, 233, 233); border-top: 0px none rgb(0, 0, 0); border-bottom: 1px solid rgb(233, 233, 233); border-radius: 0px 0px 4px 4px; padding: 0px 45px 4px 13px; line-height: 16.996px; min-height: 18px; white-space: nowrap; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 14px;  }
.S9 { margin: 10px 10px 9px 4px; padding: 0px; line-height: 21px; min-height: 0px; white-space: pre-wrap; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 14px; font-weight: 400; text-align: left;  }
.S10 { margin: 3px 10px 5px 4px; padding: 0px; line-height: 20px; min-height: 0px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-style: normal; font-size: 20px; font-weight: 700; text-align: left;  }</style></head><body><div class = rtcContent><h1  class = 'S0'><span>MuRAT Multi-Resolution (seismic) Attenuation Tomography</span></h1><div class = 'preformatted-matlab' style = 'margin: 10px 3px 10px 55px; padding: 10px 10px 10px 5px; '><div  class = 'S1'><span style="white-space: pre;"><span>SCOPE: 3D total </span><span style="color: rgb(160, 32, 240);">attenuation</span><span>, scattering, and </span><span style="color: rgb(160, 32, 240);">absorption tomography</span></span></div></div><div  class = 'S2'><span>SYSTEM: The program works on all Mac and Linux computers where it has been tried.</span></div><div  class = 'S2'><span>MATLAB Version: The code keeps the us of toolboxes to a minimum. However, there are four necessary toolboxes: Signal Processing, Curve Fitting, Image Processing and Mapping Toolboxes. The parallel computing toolbox is highly recommended for speed.</span></div><div  class = 'S2'><span>Two sample datasets (Mount St. Helens and Romania) can be downloaded at www.lucadesiena.com to test the code.</span></div><div  class = 'S2'><span>INSTRUCTIONS: The current release (3.0) works following these steps:</span></div><ol  class = 'S3'><li  class = 'S4'><span>Download the package at</span><span> </span><a href = "https://github.com/LucaDeSiena/MuRAT"><span>https://github.com/LucaDeSiena/MuRAT</span></a><span>.</span></li><li  class = 'S4'><span>Build your own input file (.m) - each field is described in the attached README file and in the example INPUT code. Build your Input files fom those.</span></li><li  class = 'S4'><span>Run MuRAT3.m and select the name of the input file you created.</span></li></ol><div  class = 'S2'><span>Author: L. De Siena, July 2021</span></div><h2  class = 'S5'><span>INPUTS AND CHECKS</span></h2><div  class = 'S2'><span>The code asks for an input file, build one from the sample files provided and select it after prompt</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre;"><span>addpath(</span><span style="color: rgb(160, 32, 240);">'./Utilities_Matlab'</span><span>)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>addpath(</span><span style="color: rgb(160, 32, 240);">'./bin/'</span><span>)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>clear; close </span><span style="color: rgb(160, 32, 240);">all</span><span>; clc</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(60, 118, 61);">% Call input file</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>[file,path]                         =   uigetfile(</span><span style="color: rgb(160, 32, 240);">'Murat_input*.mlx'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">if </span><span>isequal(file,0)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>   disp(</span><span style="color: rgb(160, 32, 240);">'User selected Cancel'</span><span>);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>   disp([</span><span style="color: rgb(160, 32, 240);">'User selected '</span><span>, fullfile(path,file)]);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>run(fullfile(path, file));</span></span></div></div></div><div  class = 'S9'><span>The Murat_checks function calculates all the computational inputs that are used in the following computations. The most important is the velocity model, which will be represented as a real or false 3D depending on user choice.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre;"><span>Murat                               =   Murat_checks(Murat);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>Murat.input                         =   orderfields(Murat.input);</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>save </span><span style="color: rgb(160, 32, 240);">./temp/Murat_checks.mat</span><span>   </span><span style="color: rgb(160, 32, 240);">Murat</span></span></div></div></div><h2  class = 'S10'><span>SEISMIC DATA PROCESSING AND FORWARD MODELLING</span></h2><div  class = 'S2'><span>The most consuming part of the code, it includes a parallelized for loop. It builds both data vectors and inversion matrices for the inversion.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre;"><span>load </span><span style="color: rgb(160, 32, 240);">./temp/Murat_checks.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>tic</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>disp(</span><span style="color: rgb(160, 32, 240);">'Data'</span><span>)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">if </span><span>Murat.input.parallelized == 1</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>    Murat                           =   Murat_dataParallelized(Murat);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">else</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>    Murat                           =   Murat_data(Murat);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span style="color: rgb(0, 0, 255);">end</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>toc</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>save </span><span style="color: rgb(160, 32, 240);">./temp/Murat_forward.mat Murat</span></span></div></div></div><h2  class = 'S10'><span>TOMOGRAPHIC INVERSIONS</span></h2><div  class = 'S2'><span>This function inverts for the total attenuation, absorption, and scattering in 3D.</span></div><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre;"><span>load </span><span style="color: rgb(160, 32, 240);">./temp/Murat_forward.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>disp(</span><span style="color: rgb(160, 32, 240);">'Inversion'</span><span>)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>Murat                               =   Murat_inversion(Murat);</span></span></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>save </span><span style="color: rgb(160, 32, 240);">./temp/Murat_inverse.mat Murat</span></span></div></div></div><h2  class = 'S10'><span>CREATING PLOTS and CLEANING UP</span></h2><div class="CodeBlock"><div class="inlineWrapper"><div  class = 'S6'><span style="white-space: pre;"><span>load </span><span style="color: rgb(160, 32, 240);">./temp/Murat_inverse.mat</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>close </span><span style="color: rgb(160, 32, 240);">all</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>disp(</span><span style="color: rgb(160, 32, 240);">'Plot'</span><span>)</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S7'><span style="white-space: pre;"><span>Murat                               =   Murat_plot(Murat);</span></span></div></div><div class="inlineWrapper"><div  class = 'S7'></div></div><div class="inlineWrapper"><div  class = 'S8'><span style="white-space: pre;"><span>save(</span><span style="color: rgb(160, 32, 240);">'Murat.mat'</span><span>,</span><span style="color: rgb(160, 32, 240);">'Murat'</span><span>);</span></span></div></div></div></div>
<br>
<!-- 
##### SOURCE BEGIN #####
%% MuRAT Multi-Resolution (seismic) Attenuation Tomography
%%
% 
%   SCOPE: 3D total attenuation, scattering, and absorption tomography
%
%% 
% SYSTEM: The program works on all Mac and Linux computers where it has been 
% tried.
% 
% MATLAB Version: The code keeps the us of toolboxes to a minimum. However, 
% there are four necessary toolboxes: Signal Processing, Curve Fitting, Image 
% Processing and Mapping Toolboxes. The parallel computing toolbox is highly recommended 
% for speed.
% 
% Two sample datasets (Mount St. Helens and Romania) can be downloaded at www.lucadesiena.com 
% to test the code.
% 
% INSTRUCTIONS: The current release (3.0) works following these steps:
%% 
% # Download the package at <https://github.com/LucaDeSiena/MuRAT https://github.com/LucaDeSiena/MuRAT>.
% # Build your own input file (.m) - each field is described in the attached 
% README file and in the example INPUT code. Build your Input files fom those.
% # Run MuRAT3.m and select the name of the input file you created.
%% 
% Author: L. De Siena, July 2021
%% INPUTS AND CHECKS
% The code asks for an input file, build one from the sample files provided 
% and select it after prompt

addpath('./Utilities_Matlab')
addpath('./bin/')

clear; close all; clc

% Call input file
[file,path]                         =   uigetfile('Murat_input*.mlx');

if isequal(file,0)
   disp('User selected Cancel');
else
   disp(['User selected ', fullfile(path,file)]);
end

run(fullfile(path, file));
%% 
% The Murat_checks function calculates all the computational inputs that are 
% used in the following computations. The most important is the velocity model, 
% which will be represented as a real or false 3D depending on user choice.

Murat                               =   Murat_checks(Murat);
Murat.input                         =   orderfields(Murat.input);
save ./temp/Murat_checks.mat   Murat
%% SEISMIC DATA PROCESSING AND FORWARD MODELLING
% The most consuming part of the code, it includes a parallelized for loop. 
% It builds both data vectors and inversion matrices for the inversion.

load ./temp/Murat_checks.mat
tic
disp('Data')
if Murat.input.parallelized == 1
    Murat                           =   Murat_dataParallelized(Murat);
else
    Murat                           =   Murat_data(Murat);
end
toc
save ./temp/Murat_forward.mat Murat
%% TOMOGRAPHIC INVERSIONS
% This function inverts for the total attenuation, absorption, and scattering 
% in 3D.

load ./temp/Murat_forward.mat

disp('Inversion')

Murat                               =   Murat_inversion(Murat);
save ./temp/Murat_inverse.mat Murat
%% CREATING PLOTS and CLEANING UP

load ./temp/Murat_inverse.mat
close all
disp('Plot')

Murat                               =   Murat_plot(Murat);

save('Murat.mat','Murat');
##### SOURCE END #####
--></body></html>